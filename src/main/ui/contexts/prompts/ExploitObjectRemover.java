package ui.contexts.prompts;

import ui.contexts.ConsoleContext;
import ui.contexts.menus.CollectionEditor;

// Represents a UI context that removes an ExploitObject from a collection
public class ExploitObjectRemover extends PromptContext {

    // EFFECTS: Creates a new ExploitObjectRemover context with the specified parentContext.
    //          Sets super.defaultResponse to the index of the last element in parentContext.collection.
    public ExploitObjectRemover(ConsoleContext parentContext) {
        super(
                parentContext,
                "Index",
                String.valueOf(((CollectionEditor) parentContext).getCollection().getLength() - 1)
        );
    }

    // MODIFIES: ((CollectionEditor) this.getParentContext()).getCollection()
    // EFFECTS: If the index is valid, removes the object from the parenContext collection at the index
    @Override
    public ConsoleContext handleInputInternal(String input) {
        for (char c : input.toCharArray()) {
            if (!Character.isDigit(c)) {
                return getParentContext();
            }
        }

        int index = Integer.parseInt(input);

        ((CollectionEditor) getParentContext()).getCollection().remove(index);

        return getParentContext();
    }
}
