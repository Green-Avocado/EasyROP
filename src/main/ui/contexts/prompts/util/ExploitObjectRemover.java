package ui.contexts.prompts.util;

import ui.contexts.ConsoleContext;
import ui.contexts.menus.CollectionEditor;
import ui.contexts.prompts.PromptContext;

// Represents a UI context that removes an ExploitObject from a collection
public class ExploitObjectRemover extends PromptContext {

    // EFFECTS: Creates a new ExploitObjectRemover context with the specified parentContext.
    //          Sets super.defaultResponse to the index of the last element in parentContext.collection.
    public ExploitObjectRemover(ConsoleContext parentContext) {
        super(
                parentContext,
                "Index",
                String.valueOf(((CollectionEditor) parentContext).getCollection().getLength() - 1)
        );
    }

    // REQUIRES: input can be parsed as an integer
    // MODIFIES: ((CollectionEditor) this.getParentContext()).getCollection()
    // EFFECTS: If the index is valid, removes the object from the parenContext collection at the index
    public ConsoleContext handleInputInternal(String input) {
        int index = Integer.parseInt(input);

        if (index >= 0) {
            ((CollectionEditor) getParentContext()).getCollection().remove(index);
        }

        return getParentContext();
    }
}
